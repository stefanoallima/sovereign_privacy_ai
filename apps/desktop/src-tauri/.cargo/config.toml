[target.x86_64-pc-windows-msvc]
# Force static CRT (+crt-static) so that Rust, cc-compiled C++ (esaxx-rs), and
# llama-cpp-sys-2's cmake build all use /MT consistently.
#
# Why: esaxx-rs is compiled with /MT (static CRT), embedding /NODEFAULTLIB:msvcrt.lib
# and /DEFAULTLIB:libcmt.lib pragmas. Mixing /MT and /MD objects causes LNK2001 for
# __chkstk. The cleanest fix is to make the whole link use static CRT:
#   - Rust code → /MT via +crt-static
#   - cc crate (esaxx-rs) → auto-detects crt-static, uses /MT
#   - cmake crate (llama-cpp-sys-2) → sets CMAKE_MSVC_RUNTIME_LIBRARY=MultiThreaded
#     when crt-static is detected, so llama.cpp C++ is also compiled /MT
rustflags = ["-C", "target-feature=+crt-static"]
