[target.x86_64-pc-windows-msvc]
# Mixed CRT situation:
#   llama-cpp-sys-2 → MD_DynamicRelease (dynamic CRT, /MD)
#   esaxx-rs (via tokenizers via gline-rs) → MT_StaticRelease (static CRT, /MT)
# This causes:
#   LNK2038: RuntimeLibrary mismatch (WARNING only — "link will still proceed" per MSVC docs)
#   LNK2005: duplicate C++ stdlib symbols between msvcprt.lib and libcpmt.lib (FATAL → LNK1169)
#   LNK4098: defaultlib conflicts
#
# Fix for LNK2005 / LNK1169:
#   Exclude static C/C++ runtime libraries so the linker uses only the dynamic runtime.
#   The LNK2038 warnings remain but are non-fatal.
#   load-dynamic in Cargo.toml already removed ort-sys from the static link.
rustflags = [
    "-C", "link-arg=/NODEFAULTLIB:libcpmt.lib",
    "-C", "link-arg=/NODEFAULTLIB:libcpmtd.lib",
    "-C", "link-arg=/NODEFAULTLIB:LIBCMT",
    "-C", "link-arg=/NODEFAULTLIB:LIBCMTD",
]
